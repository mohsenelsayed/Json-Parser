const myDB = require("db.json");

class Member {
  constructor(fname,mname,lname,committee,joindate){
    this.firstName = fname;
    this.midName = mname;
    this.lastName = lname;
    this.committee = committee;
    this.joinDate = joindate;
  }
  fullName(){
    return(this.firstName.trim() + this.midName.trim() + this.lastName.trim());
  }
  joinDay(){
    let timestamp = new Date(this.joinDate);
    let months = ['January','February','March','April','May','June','July','August','September','October','November','December'];
    let year = timestamp.getFullYear();
    let month = months[timestamp.getMonth()];
    let date = timestamp.getDate();
    let days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
    let dayName = days[date%7];
    let hour = timestamp.getHours();
    let min = timestamp.getMinutes();
    let sec = timestamp.getSeconds();
    let time = dayName + ', ' + month + ' ' + date + ' ' + '\x1b[31m' +year ;
    return time;
  }
}

let training = [];
let publicity = [];
let hr = [];
let fr = [];
let technical = [];
let events = [];
let media = [];

for(let i in myDB){
  let person = myDB[i];
  let temp = new Member(person.firstName,person.middleName,person.lastName,person.committee,person.joinDate);
  if(person.committee === "Training"){
    training.push(temp);
  }else if(person.committee === "Technical"){
    technical.push(temp);
  }else if(person.committee === "Publicity"){
    publicity.push(temp);
  }else if(person.committee === "HR"){
    hr.push(temp);
  }else if(person.committee === "FR"){
    fr.push(temp);
  }else if(person.committee === "Events"){
    events.push(temp);
  }else{
    media.push(temp);
  }
}

function compare( a, b ) {
  if ( a.fullName() < b.fullName() ){
    return -1;
  }
  if ( a.fullName() > b.fullName() ){
    return 1;
  }
  return 0;
}

training.sort( compare );
hr.sort( compare );
fr.sort( compare );
technical.sort( compare );
events.sort( compare );
media.sort( compare );
publicity.sort( compare );

console.log("\x1b[32m======================================== \x1b[0mTraining \x1b[32m========================================");
let counter = 0;
console.log();
for(member of training){
  counter++;
  console.log(`\x1b[31m${counter}\x1b[0m: Name: ${member.firstName} ${member.midName} ${member.lastName}, Joined \x1b[33min\x1b[0m: ${member.joinDay()}`);
}
console.log();

console.log("\x1b[32m======================================== \x1b[0mTechnical \x1b[32m========================================");
counter = 0;
console.log();
for(member of technical){
  counter++;
  console.log(`\x1b[31m${counter}\x1b[0m: Name: ${member.firstName} ${member.midName} ${member.lastName}, Joined \x1b[33min\x1b[0m: ${member.joinDay()}`);
}
console.log();

console.log("\x1b[32m======================================== \x1b[0mPublicity \x1b[32m========================================");
counter = 0;
console.log();
for(member of publicity){
  counter++;
  console.log(`\x1b[31m${counter}\x1b[0m: Name: ${member.firstName} ${member.midName} ${member.lastName}, Joined \x1b[33min\x1b[0m: ${member.joinDay()}`);
}
console.log();

console.log("\x1b[32m======================================== \x1b[0mEvents \x1b[32m========================================");
counter = 0;
console.log();
for(member of events){
  counter++;
  console.log(`\x1b[31m${counter}\x1b[0m: Name: ${member.firstName} ${member.midName} ${member.lastName}, Joined \x1b[33min\x1b[0m: ${member.joinDay()}`);
}
console.log();

console.log("\x1b[32m======================================== \x1b[0mMedia \x1b[32m========================================");
counter = 0;
console.log();
for(member of media){
  counter++;
  console.log(`\x1b[31m${counter}\x1b[0m: Name: ${member.firstName} ${member.midName} ${member.lastName}, Joined \x1b[33min\x1b[0m: ${member.joinDay()}`);
}
console.log();

console.log("\x1b[32m======================================== \x1b[0mHR \x1b[32m========================================");
counter = 0;
console.log();
for(member of hr){
  counter++;
  console.log(`\x1b[31m${counter}\x1b[0m: Name: ${member.firstName} ${member.midName} ${member.lastName}, Joined \x1b[33min\x1b[0m: ${member.joinDay()}`);
}
console.log();

console.log("\x1b[32m======================================== \x1b[0mFR \x1b[32m========================================");
counter = 0;
console.log();
for(member of training){
  counter++;
  console.log(`\x1b[31m${counter}\x1b[0m: Name: ${member.firstName} ${member.midName} ${member.lastName}, Joined \x1b[33min\x1b[0m: ${member.joinDay()}`);
}
console.log();
